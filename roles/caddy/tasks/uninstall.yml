---
- name: Stop and remove Caddy Docker container
  community.docker.docker_compose_v2:
    project_src: "{{ caddy_app_path }}"
    state: absent
  failed_when: false

- name: Display uninstall summary
  ansible.builtin.debug:
    msg:
      - "ðŸ”’ Caddy uninstalled successfully!"
      - "Note: Data and configuration are preserved."
      - "To remove data, run: rm -rf {{ caddy_data_path }}"
      - "To remove config, run: rm -rf {{ caddy_config_path }}"
      - "To remove app directory, run: rm -rf {{ caddy_app_path }}"
